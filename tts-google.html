<!DOCTYPE html>
<html>
  <head>
    <title>TTS Google &ndash; Micorksen</title>
    <style>body{background-color:rgb(0,0,0)}video{position:absolute;top:0px;right:0px;bottom:0px;left:0px;max-height:100%;max-width:100%;margin:auto}</style>
  </head>
  <body>
    <video controls autoplay muted>
      <source type="audio/mp3" />
    </video>
    <script>
      const p={},v=document.querySelector('video');window.location.search.replace('?','').split('&').forEach(e => {const [n,_v]=e.split('=');p[n]=decodeURIComponent(_v)});
      const xhr = new XMLHttpRequest();
      xhr.onreadystatechange = () => {
        if (xhr.readyState === 4 && xhr.status === 200) {
          console.log('ready!');
          console.log(xhr.responseText);
        }
      }

      xhr.open('GET', `https://cors-anywhere.herokuapp.com/https://www.google.com/async/translate_tts?ttsp=tl:${p['lang'] || 'fr'},txt=${encodeURIComponent(p['text'] || 'Bonjour !')},spd=${p['speed'] || 1}&async=_fmt:jspb`);
      xhr.send();
    </script>
  </body>
</html>
